<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2016-11-26 Sat 16:16 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>Use the Graphic emacs on bash</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="NEIL_PCPC" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Use the Graphic emacs on bash</h1>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1"><span class="section-number-2">1</span> The preview of the result</h2>
<div class="outline-text-2" id="text-1">
<p>
The screenshot of emacs is shown below:
</p>

<div class="figure">
<p><img src="images/screenshot_emacs.png" alt="cat/spider image" title="emacs" align="center" />
</p>
<p><span class="figure-number">Figure 1:</span> Screenshot of emacs on Win10 subsystem</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline12" class="outline-2">
<h2 id="orgheadline12"><span class="section-number-2">2</span> Detail steps</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2"><span class="section-number-3">2.1</span> The concept of win10 subsystem</h3>
<div class="outline-text-3" id="text-2-1">
<p>
The subsystem of win10 is not VM, cygwin or MSYS32. It executes the original elf of ubuntu, like wine execute .exe file on linux.
</p>
</div>
</div>
<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3"><span class="section-number-3">2.2</span> How to enable subsystem of win10</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Please google or baidu. If there is no update pushed to you, you can update your WIN10 by downloading a software to update it to Aniversary update which is published by Microsoft.
</p>
</div>
</div>
<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4"><span class="section-number-3">2.3</span> How to install emacs on subsystem</h3>
<div class="outline-text-3" id="text-2-3">
<ol class="org-ol">
<li>You can use the <code>sudo apt-get install emacs24</code> to install emacs directly, but it is not recommended
<ul class="org-ul">
<li>You can't use the GUI through Xming or Xmanager</li>
<li>The version of emacs is 24.3, if you are using spacemacs, some configuration would not be supported perfectly</li>
</ul></li>
<li><p>
Build the emacs24.5 by source code
Steps:
</p>
<div class="org-src-container">

<pre class="src src-shell"><span class="linenr"> 1: </span><span style="color: #75715E;"># </span><span style="color: #75715E;">Install the gcc</span>
<span class="linenr"> 2: </span>sudo apt-get install build-essiential
<span class="linenr"> 3: </span><span style="color: #75715E;"># </span><span style="color: #75715E;">Build dep - I don't the reason</span>
<span class="linenr"> 4: </span><span style="color: #75715E;"># </span><span style="color: #75715E;">If the command below failed, please add the 163 into source.list</span>
<span class="linenr"> 5: </span>sudo apt-get build-dep emacs24
<span class="linenr"> 6: </span><span style="color: #75715E;"># </span><span style="color: #75715E;">Get the source code</span>
<span class="linenr"> 7: </span>wget http://mirrors.ustc.edu.cn/gnu/emacs/emacs-24.5.tar.xz
<span class="linenr"> 8: </span><span style="color: #75715E;"># </span><span style="color: #75715E;">unzip</span>
<span class="linenr"> 9: </span>xz -d emacs-24.5.tar.xz
<span class="linenr">10: </span>tar -xvf emacs-24.5.tar
<span class="linenr">11: </span><span style="color: #F92672;">cd</span> emacs-24.5
<span class="linenr">12: </span><span style="color: #75715E;"># </span><span style="color: #75715E;">Configure the emacs</span>
<span class="linenr">13: </span>./configure
<span class="linenr">14: </span><span style="color: #75715E;"># </span><span style="color: #75715E;">Make</span>
<span class="linenr">15: </span><span style="color: #75715E;"># </span><span style="color: #75715E;">I faced a trouble when I build the emacs from source code, which is caused by dynamic memory allocation</span>
<span class="linenr">16: </span><span style="color: #75715E;"># </span><span style="color: #75715E;">Please cd to /proc/sys/kernel/ and echo 0 | sudo tee randomize_va_space</span>
<span class="linenr">17: </span><span style="color: #75715E;"># </span><span style="color: #75715E;">http://askubuntu.com/questions/318315/how-can-i-temporarily-disable-aslr-address-space-layout-randomization</span>
<span class="linenr">18: </span>make
<span class="linenr">19: </span>make install
</pre>
</div></li>
</ol>
</div>
</div>
<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11"><span class="section-number-3">2.4</span> Use the Xming or Xmanager to display the screen</h3>
<div class="outline-text-3" id="text-2-4">
</div><div id="outline-container-orgheadline5" class="outline-4">
<h4 id="orgheadline5"><span class="section-number-4">2.4.1</span> Install Xming or Xmanager</h4>
<div class="outline-text-4" id="text-2-4-1">
<p>
Currently, we can only install the Xming6.9 version free, if you want to install the latest version, please donation
For the Xmanager, it is a businiss software, maybe not a good choice. However, you can try it.
I will use the Xmanager as example below.
</p>
</div>
</div>
<div id="outline-container-orgheadline6" class="outline-4">
<h4 id="orgheadline6"><span class="section-number-4">2.4.2</span> View the emacs gui on Xmanager</h4>
<div class="outline-text-4" id="text-2-4-2">
<p>
Start the Xmanager(Passive) and go back to the bash and enter the command below:
</p>
<div class="org-src-container">

<pre class="src src-shell"><span style="color: #FD971F;">DISPLAY</span>=:0 emacs
</pre>
</div>
<p>
Then, you can see the gui window of emacs. But, I think you may not like the style of it because of its ugly fonts and frame size
</p>
</div>
</div>
<div id="outline-container-orgheadline7" class="outline-4">
<h4 id="orgheadline7"><span class="section-number-4">2.4.3</span> Configure the fonts</h4>
<div class="outline-text-4" id="text-2-4-3">
<p>
<b>Steps:</b>
</p>
<ol class="org-ol">
<li>Before configure the fonts, you should consider what fonts that you will use most often. For me, I like the Monaco, Source code pro, InputMono, Microsfot Yahei. Therefore, I copied these fonts into one directory named favorite fonts.</li>
<li>make the fontdir and fontscale for our fonts
<ul class="org-ul">
<li>Go back to bash and input the command below:
<code>sudo apt-get install xfonts-utils</code></li>
<li>cd to the directory which contains our fonts</li>
<li>Input the command below:
<code>mkfontdir</code>
<code>mkfontscale</code>
Then you can see font.dir and font.scale are created</li>
<li>Copy the directory to <i>usr/share/fonts and install these fonts on our system
<code>sudo mkfontdir</code>    #/Optional</i>
<code>sudo mkfontscale</code>  #/Optional/
<code>sudo fc-cache</code>     #/Required/</li>
<li>Copy the font directory to %PATH<sub>TO</sub><sub>XMANAGER</sub>%/Fonts</li>
<li><p>
Add the font directory for Xmanager <br  />
</p>

<div class="figure">
<p><img src="images/screenshot_fonts.png" alt="cat/spider image" title="Screenshot" align="center" />
</p>
<p><span class="figure-number">Figure 2:</span> Screenshot of adding font dir</p>
</div></li>
</ul></li>
<li>Restart the emacs by using <i>DISPLAY=:0 emacs</i></li>
</ol>
</div>
</div>
<div id="outline-container-orgheadline10" class="outline-4">
<h4 id="orgheadline10"><span class="section-number-4">2.4.4</span> Configure the frame size</h4>
<div class="outline-text-4" id="text-2-4-4">
<p>
I spent many time on fixing this issue because I have no idea about X11 system. If you are farmiliar with it, it is easy for you.
</p>
</div>
<ol class="org-ol"><li><a id="orgheadline8"></a>Simple instruction of how Xmanager works<br  /><div class="outline-text-5" id="text-2-4-4-1">
<p>
Xmanager depends on X system on linux, so we should make sure X system have been installed on your system. In fact, the X11 has been preinstalled in win10 bash.
Xmanager plays the role of monitor for tranditional PC, and X system create the graphic data and send to Xmanager.
</p>
</div></li>
<li><a id="orgheadline9"></a>How to set the frame size<br  /><div class="outline-text-5" id="text-2-4-4-2">
<p>
In the begining, I think the reason for small windows size is small resolution is set by X system. Then I used the xrandr to try to resize the resolution. However, it didn't work.
Then I grep the "600" and "800" under the /etc/X11 and found there were many confiugrations for specific app of X11. For example, the window size of xdotview is 600x800. If you opened the app, you can see its size.
So I think I should found the confgiruation file for emacs. Then I baidu and bing it and found that how to resize emacs with two methods:
</p>
<ul class="org-ul">
<li>modified the ~/.Xdefaults</li>
<li>Use the elisp to modified it(I tried it many times, invalid)</li>
</ul>
<p>
I used the first method and succeed!<br  />
<a href="http://my.oschina.net/u/1186777/blog/147488">Two methods to change initial size of emacs</a>
</p>
</div></li></ol>
</div>
</div>
</div>
<div id="outline-container-orgheadline13" class="outline-2">
<h2 id="orgheadline13"><span class="section-number-2">3</span> Enjoy your emacs!!!</h2>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: NEIL<sub>PC</sub></p>
<p class="date">Created: 2016-11-26 Sat 16:16</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>